<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic Water Dispenser</title>
    <link rel="stylesheet" href="a_dispenser.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script>


        // Fungsi untuk mengirim data ke PHP dan memperbarui tabel
        function updateDispenserData(status, distance, time) {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "bluetooth_receiver.php", true);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            // Menyiapkan data untuk dikirim
            var data = "status=" + encodeURIComponent(status) + "&distance=" + encodeURIComponent(distance) + "&time=" + encodeURIComponent(time);
            // Ketika respon diterima dari PHP
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    // Memproses respon JSON
                    var response = JSON.parse(xhr.responseText);
                    if (response.status && response.distance && response.time) {
                        // Memperbarui tabel dengan data yang diterima
                        document.getElementById('status-cell').innerText = response.status;
                        document.getElementById('distance-cell').innerText = response.distance;
                        document.getElementById('time-cell').innerText = response.time;
                    } else {
                        console.log("Error: Data tidak lengkap");
                    }
                }
            };
            // Mengirim data ke PHP
            xhr.send(data);
        }

        
        function generateGlassIcons(liters) {
            var glasses = Math.round(liters / 0.25);
            var glassIcons = '';
            for (var i = 0; i < glasses; i++) {
                glassIcons += '<i class="fas fa-glass-whiskey glass-icon"></i>';
            }
            return glassIcons;
        }
        // Fungsi untuk mengupdate ikon gelas pada halaman
        window.onload = function() {
            document.getElementById("glass-icons-45kg").innerHTML = generateGlassIcons(1.9);
            document.getElementById("glass-icons-50kg").innerHTML = generateGlassIcons(2.1);
            document.getElementById("glass-icons-55kg").innerHTML = generateGlassIcons(2.3);
            document.getElementById("glass-icons-60kg").innerHTML = generateGlassIcons(2.5);
            document.getElementById("glass-icons-70kg").innerHTML = generateGlassIcons(2.9);
            document.getElementById("glass-icons-75kg").innerHTML = generateGlassIcons(3.2);
            document.getElementById("glass-icons-80kg").innerHTML = generateGlassIcons(3.5);
            document.getElementById("glass-icons-85kg").innerHTML = generateGlassIcons(3.7);
        };


        // Fungsi untuk menghitung jumlah air berdasarkan berat badan (berdasarkan tabel)
        function calculateWaterIntake() {
            var weight = parseFloat(document.getElementById("weight-input").value);
            var waterIntake = 0;
            
            // Menentukan jumlah air berdasarkan berat badan
            if (weight >= 35 && weight < 50) {
                waterIntake = 1.9;
            } else if (weight >= 50 && weight < 55) {
                waterIntake = 2.1;
            } else if (weight >= 55 && weight < 60) {
                waterIntake = 2.3;
            } else if (weight >= 60 && weight < 70) {
                waterIntake = 2.5;
            } else if (weight >= 70 && weight < 75) {
                waterIntake = 2.9;
            } else if (weight >= 75 && weight < 80) {
                waterIntake = 3.2;
            } else if (weight >= 80 && weight < 85) {
                waterIntake = 3.5;
            } else if (weight <= 90) {
                waterIntake = 3.7;
            } else {
                alert("Berat badan tidak sesuai dengan kategori");
                return;
            }
            
            // Menampilkan hasil perhitungan jumlah air
            document.getElementById("water-intake-result").innerText = "Jumlah air yang dibutuhkan: " + waterIntake + " L";
        }


    </script>
</head>


<body>
    <header>
        <div class="container">
            <h1>Automatic Water Dispenser</h1>
            <p>Sistem dispenser air otomatis untuk kenyamanan dan efisiensi penggunaan air.</p>
        </div>
    </header>

    <!-- Fitur Utama -->
    <section class="features">
        <div class="container">
            <h2>Fitur Utama:</h2>
            <ul>
                <li><strong>Sensor Otomatis:</strong> Deteksi kedekatan tangan atau objek untuk membuka dispenser secara otomatis.</li>
                <li><strong>Hemat Energi:</strong> Sistem hemat energi yang hanya aktif saat diperlukan.</li>
                <li><strong>Kontrol Bluetooth:</strong> Mengontrol dispenser melalui perangkat Bluetooth untuk kemudahan penggunaan.</li>
                <li><strong>Desain Ergonomis:</strong> Desain yang mudah digunakan dan ramah pengguna.</li>
            </ul>
        </div>
    </section>

    <!-- Link untuk menuju tabel status dispenser -->
    <div class="container">
        <a href="#table-section" class="show-table-link">Lihat Status Dispenser</a>
    </div>

    <!-- Tabel untuk Jumlah Minum dalam Sehari -->
    <section id="water-intake-section" class="table-section">
        <div class="container">
            <h2><center>Takaran Minum Dalam Sehari Berdasarkan Berat Badan </center></h2>
            <table>
                <thead>
                    <tr>
                        <th>Berat Badan (Kilogram)</th>
                        <th>Jumlah Air (Liter)</th>
                        <th>Takaran Gelas</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>45-49 KG</td>
                        <td>1.9 LTR</td>
                        <td><span id="glass-icons-45kg"></span></td>
                    </tr>
                    <tr>
                        <td>50-54 KG</td>
                        <td>2.1 LTR</td>
                        <td><span id="glass-icons-50kg"></span></td>
                    </tr>
                    <tr>
                        <td>55-59 KG</td>
                        <td>2.3 LTR</td>
                        <td><span id="glass-icons-55kg"></span></td>
                    </tr>
                    <tr>
                        <td>60-64 KG</td>
                        <td>2.5 LTR</td>
                        <td><span id="glass-icons-60kg"></span></td>
                    </tr>
                    <tr>
                        <td>70-74 KG</td>
                        <td>2.9 LTR</td>
                        <td><span id="glass-icons-70kg"></span></td>
                    </tr>
                    <tr>
                        <td>75-79 KG</td>
                        <td>3.2 LTR</td>
                        <td><span id="glass-icons-75kg"></span></td>
                    </tr>
                    <tr>
                        <td>80-84 KG</td>
                        <td>3.5 LTR</td>
                        <td><span id="glass-icons-80kg"></span></td>
                    </tr>
                    <tr>
                        <td>85-90 KG</td>
                        <td>3.7 LTR</td>
                        <td><span id="glass-icons-85kg"></span></td>
                    </tr>
                </tbody>
            </table>

            <!-- Form Input Berat Badan untuk Menghitung Jumlah Air -->
            <div class="container">
                <h3>Hitung Jumlah Air Berdasarkan Berat Badan Anda</h3>
                <form onsubmit="event.preventDefault(); calculateWaterIntake();">
                    <label for="weight-input">Masukkan Berat Badan (kg): </label>
                    <input type="number" id="weight-input" placeholder="Masukkan berat badan Anda" required>
                    <button type="submit">Hitung</button>
                </form>
                <p id="water-intake-result" style="font-weight: bold;"></p> <!-- Hasil perhitungan jumlah air -->
            </div>
        </div>
    </section>


    <!-- Tabel Status Dispenser -->
    <section id="table-section" class="table-section">
        <div class="container">
            <h2>Status Dispenser</h2>
            <table>
                <thead>
                    <tr>
                        <th>id</th>
                        <th>Status</th>
                        <th>Jarak</th>
                        <th>Waktu Pengambilan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>-</td>
                        <td id="status-cell">-</td>
                        <td id="distance-cell">-</td>
                        <td id="time-cell">-</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Automatic Water Dispenser. Kelompok 7.</p>
    </footer>
</body>
</html>
